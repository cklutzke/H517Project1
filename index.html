<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>H517 - Project 1</title>
	<script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
	<style>
		// TODO: Put something here!
	</style>
</head>
<body>

	<svg id="main" width="500" height="500">
	</svg>

	
	<script type="text/javascript">

		// TODO: How can I dynamically set the chart size?
		const CHART_WIDTH = 500;
		const CHART_HEIGHT = 500
		
		let xScale = d3.scale.linear();
		let yScale = d3.scale.linear();
		
		let streets = [];
		let pumps = [];
		
		function drawPumps() {
			d3.csv("pumps.csv", function(data) {
				for (let i=0; i < data.length; i++) {
					pumps.push(
						{x: data[i].x, y: data[i].y}
					);
				}
				// TODO: Draw the pumps.
			});
		}

		d3.json("streets.json", function(data) {
			streets = data;
		
			// TODO: Set the scales based upon the data.
			xScale.domain([0,20]).range([0, CHART_WIDTH]);
			yScale.domain([0,20]).range([CHART_HEIGHT, 0]);
			let s = d3.select('svg');
			
    		s.selectAll('line')
    			.data(streets)
    			.enter()
    			.append('line')
    			.style('fill', 'none')
    			.style('stroke', 'steelblue')
    			.style('stroke-width', '1px')
    			.attr('x1', function(d) { return xScale(d[0].x); })
    			.attr('y1', function(d) { return yScale(d[0].y); })
    			.attr('x2', function(d) { return xScale(d[1].x); })
    			.attr('y2', function(d) { return yScale(d[1].y); })
				
			//drawPumps();
		});
		


		// *** Stuff below is older code borrowed for reference.
		
/*
		var energyProduction = [];
		function drawLineChart() 
		{
			var maxValue = d3.max(energyProduction, function(d) {
				return d.production;
			});
			var xScale = d3.scale.linear();
			var yScale = d3.scale.linear();

			xScale.domain([1980, 2012]).range([0, CHART_WIDTH]);
			
			yScale.domain([0, maxValue]).range([CHART_HEIGHT, 0]);

			var pathGenerator = d3.svg.line()
				.x(function(d) { return xScale(d.year); })
				.y(function(d) { return yScale(d.production); });

			var g = d3.select('svg').select('g');

    		g.append('path')
    			.style('fill', 'none')
    			.style('stroke', 'steelblue')
    			.style('stroke-width', '3px')
    			.attr('d', pathGenerator(energyProduction));


		}
			
		d3.csv('energy_us.csv', function(data) 
		{
			for (var i=0; i<data.length; i++)
			{
				var record = data[i];
				
				// loop through all years, from 1980 to 2012
				for (var y=1980; y<=2012; y++) 
				{
					var value = record[y];
					var object = {
						year: y,
						production: +value
					};

					energyProduction.push(object);
				}
			}
			drawLineChart();

		});
		
*/
		
	</script>
</body>


</html>
